<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>dw</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        body{
            background: #000;
            min-width: 1200px;
            min-height: 600px;
            -webkit-font-smoothing: antialiased;
            font-family: sans-serif;
        }
        .main{
            width: 1200px;
            height: 600px;
            background: #000 url(img/bg.jpg);
            position: absolute;
            left: 50%;
            top: 50%;
            margin-left: -600px;
            margin-top: -300px;
            overflow: hidden;
        }
        .c_congzi_box{
            width: 312px;
            height: 305px;
            position: absolute;
            left: 700px;
            top: 184px;
        }
        .c_zongzi{
            width: 312px;
            height: 305px;
            background: url(img/zz.png);
        }
        .c_shengzi_1{
            width: 218px;
            height: 180px;
            position: absolute;
            background: url(img/line_1.png);
            left: 10px;
            top: 120px;
        }

        .c_zuoye{
            width: 114px;
            height: 266px;
            position: absolute;
            background: url(img/leaf_left.png);
            left: 0px;
            top: -30px;
            z-index: 1;
        }
        .c_youye{
            width: 318px;
            height: 338px;
            position: absolute;
            background: url(img/leaf_right.png);
            left: 80px;
            top: -60px;
            z-index: 111;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;
            opacity: 0;
            display: none;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;
            transform: scale(0.8);
        }

        .c_youye_in{
            opacity: 1;
            transform: rotate(5deg) scale(0.8);
        }
        .c_youye_out{
            opacity: 0;
            transform: rotate(15deg) scale(0.8);
        }
        .c_diye{
            width: 618px;
            height: 468px;
            position: absolute;
            background: url(img/leaf_expand.png);
            left: -150px;
            top: -45px;
            z-index: 99;
            opacity: 0;
            display: none;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;


        }
        .c_shengzi_0{
            display: none;
        }
        .c_t_1{
            width: 180px;
            height: 100px;
            position: absolute;
            background: url(img/t_jixiang.png);
            left: 50%;
            top: 50%;
            margin-left: -70px;
            margin-top: -50px;
            z-index: 200;
            -webkit-transform-origin: center center;
            -moz-transform-origin: center center;
            -ms-transform-origin: center center;
            -o-transform-origin: center center;
            transform-origin: center center;
            transform: scale(0.8);
            opacity: 0;
            display: none;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;
        }
        .c_t_2{
            width: 180px;
            height: 100px;
            position: absolute;
            background: url(img/t_ruyi.png);
            left: 50%;
            top: 50%;
            margin-left: -70px;
            margin-top: -50px;
            z-index: 200;
            -webkit-transform-origin: center center;
            -moz-transform-origin: center center;
            -ms-transform-origin: center center;
            -o-transform-origin: center center;
            transform-origin: center center;
            transform: scale(0.8);
            opacity: 0;
            display: none;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;
        }
        .text{
            position: absolute;
            width: 400px;
            height: 370px;
            left: 180px;
            top: 140px;
            font-size: 14px;
            line-height: 20px;
            color: #333;
        }
        .text_in{
            opacity: 0;
            display: block;
        }
        .text .caption{
            width: 400px;
            height: 240px;
            background: url(img/caption.png) no-repeat;
            margin-left: 40px;
        }
        .text .caption_rock{
            -webkit-animation: rock 4s infinite;
            -o-animation: rock 4s infinite;
            animation: rock 4s infinite;
        }
        .text .to{
            width: 400px;
            margin-top: 10px;
            margin-left: 40px;
            opacity: 0;
            -webkit-transition: all 1s 0.5s;
            -moz-transition: all 1s 0.5s;
            -ms-transition: all 1s 0.5s;
            -o-transition: all 1s 0.5s;
            transition: all 1s 0.5s;
        }
        .text .msg{
            width: 400px;
            margin-top: 10px;
            margin-left: 40px;
        }
        .text .from{
            width: 400px;
            margin-top: 10px;
            margin-left: 40px;
            text-align: right;
        }

        .c_zongzirou{
            width: 288px;
            height: 206px;
            position: absolute;
            background: url(img/zzr_1.png);
            -webkit-background-size: 288px 206px;
            background-size: 288px 206px;
            left: 50px;
            top: 34px;
            z-index: 110;
        }

        .c_zongzirou{
            width: 288px;
            height: 206px;
            position: absolute;
            background: url(img/zzr_1.png);
            -webkit-background-size: 288px 206px;
            background-size: 288px 206px;
            left: 50px;
            top: 34px;
            z-index: 110;
            opacity: 0;
            display: none;
            -webkit-transition: all 1s;
            -moz-transition: all 1s;
            -ms-transition: all 1s;
            -o-transition: all 1s;
            transition: all 1s;
        }

        .c_zongzirou_view_1{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            background-image: url(img/zzr_1.png);
        }
        .c_zongzirou_view_2{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            background-image: url(img/zzr_2.png);
        }
        .c_zongzirou_view_3{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            background-image: url(img/zzr_3.png);
        }
        .c_zongzirou_view_4{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            background-image: url(img/zzr_4.png);
        }
        .c_zongzirou_view_0{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            background-image: url(img/zzr_1.png);
            transform: rotateY(180deg);
        }
        .c_t_view_2{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.8) rotateY(30deg) translate(-50px,0) rotate(8deg);
        }
        .c_t_mirror_2{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.7) rotateY(70deg) translate(283px,-15px) rotate(-8deg);
        }
        .c_t_view_3{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.75) rotateY(49deg) translate(-94px,0) rotate(15deg);
        }
        .c_t_mirror_3{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.75) rotateY(49deg) translate(118px,0) rotate(-15deg);
        }
        .c_t_view_3{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.6) rotateY(50deg) translate(-196px,10px) rotate(24deg);
        }
        .c_t_mirror_3{
            -webkit-transition: all 0s;
            -moz-transition: all 0s;
            -ms-transition: all 0s;
            -o-transition: all 0s;
            transition: all 0s;
            transform: scale(0.8) rotateY(30deg) translate(58px,10px) rotate(-5deg);
        }
    </style>
</head>
<body>
<div class="main">
    <div class="c_congzi_box">
        <div class="c_zongzi">

        </div>
        <div class="c_shengzi_1">

        </div>
        <div class="c_zongzirou">

        </div>
        <div class="c_zuoye"></div>
        <div class="c_youye"></div>
        <div class="c_diye"></div>

        <div class="c_t_1"></div>
        <div class="c_t_2"></div>
    </div>
    <div class="text">
        <div class="caption">
xxx
        </div>
        <div class="to">

        </div>
        <div class="msg">

        </div>
        <div class="from">
            Test
        </div>
    </div>
</div>
<script>
    var Timeline=function(){
        this.order=[];
        this.add = function(timeout, func, log){
            this.order.push({
                timeout:timeout,
                func:func,
                log:log
            });
            this.start = function(){
                for(s in this.order){
                    (function(me){
                        var fn = me.func;
                        var timeout = me.timeout;
                        var log = me.log;
                        timeout = timeout -ff;
                        setTimeout(fn,timeout);
                        setTimeout(function(){
                            console.log('timeout');
                        },timeout);
                    })(this.order[s])

                }
            }
        }
    }
    var g = function(id){
        return document.getElementById(id);
    }
    var s1 = new Timeline();
    var s2 = new Timeline();
    var s3 = new Timeline();
    var s4 = new Timeline();
    s1.add(1,function(){
        g('z_zongzi_box').className = 'c_zongzi_box c_zongzi_box_rock';
        g('c_shengzi').onclick = function(){
            s2.start();
            g('c_shengzi').onclick=function(){

            }
        }
    })

    s2.add(1,function(){
        g('c_zongzi_box').className = "c_zongzi_box";
        g('text').className = "cext text_in";
    })

    s2.add(100,function(){
        g('c_shengzi').className = "c_shengzi_2";
    })
    s2.add(500,function(){
        g('c_shengzi').className = "c_shengzi_3";
    })
    s2.add(1000,function(){
        g('c_shengzi').className = "c_shengzi_4";
        g('caption').className = "caption caption_rock";
    })


    s2.add(1500,function(){
        g('c_shengzi').className = "c_shengzi_0";
    })

    s2.add(2000,function(){
        g('c_zongzi').className = "c_zongzi c_zongzi_out";
        g('c_zuoye').className = "c_zuoye c_zuoye_in";
        g('c_youye').className = "c_youye c_youye_in";
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in";
        g('c_t_1').className = "c_t_1 c_t_in";
        g('c_t_2').className = "c_t_2 c_t_mirror_0";
    })

    s2.add(3000,function(){
        g('c_diye').className = "c_diye c_diye_in";
        g('c_zuoye').className = "c_zuoye c_zuoye_in c_zuoye_out";
        g('c_youye').className = "c_youye c_youye_in c_youye_out";

    })

    s3.add(1000,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_1";
    })
    s3.add(1200,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_2";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_2";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_2";
    })
    s3.add(1400,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_3";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_3";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_3";
    })
    s3.add(1600,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_4";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_4";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_4";
    })

    s3.add(3200,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_3";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_3";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_3";
    })
    s3.add(3400,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_2";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_2";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_2";
    })

    s3.add(3600,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_2";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_4";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_4";
    })

    s3.add(3800,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_3";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_3";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_3";
    })

    s3.add(4000,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_4";
        g('c_t_1').className = "c_t_1 c_t_in c_t_view_2";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_2";
    })
    s3.add(4200,function(){
        g('c_zongzirou').className = "c_zongzirou c_zongzirou_in c_zongzirou_view_0";
        g('c_t_1').className = "c_t_1 c_t_in";
        g('c_t_2').className = "c_t_2 c_t_in c_t_mirror_0";

        g('c_t_1').onclick = function(){

        }
    })

    s3.add(7500,function(){
        if(s3.jump){
            s4.start();
        }else{
            s3.start();
        }
    })

    s3.add(5000,function(){
        s3.start();
    })

    s2.start();

    var imgs = ['img/zzr_2.png','img/zzr_3.png','img/zzr_4.png'];
    var imgs_onload = function(){
        imgs.pop();
        if(imgs.length==0){
            //s2.start();
            s1.start();
        }
    }

    for(s in imgs){
        var img = new Image;
        img.onload =imgs_onload();
        img.src = imgs[s];
    }
</script>
</body>
</html>